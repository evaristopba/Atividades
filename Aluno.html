<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Jogo STOP - Aluno</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f0f0f0; }
        #game-container { background: white; padding: 20px 40px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); text-align: center; }
        #status-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 0, 0, 0.7); color: white; font-size: 5em; display: flex; justify-content: center; align-items: center; z-index: 10; }
        input:disabled { background-color: #e9ecef; }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>Aguardando o jogo começar...</h1>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script>
        // SEU CÓDIGO DE CONFIGURAÇÃO ÚNICO
        const firebaseConfig = {
            apiKey: "AIzaSyA9eapu_h3mbN35TOVc2kbv86J7OFLRk4k",
            authDomain: "meu-super-jogo-stop.firebaseapp.com",
            databaseURL: "https://meu-super-jogo-stop-default-rtdb.firebaseio.com",
            projectId: "meu-super-jogo-stop",
            storageBucket: "meu-super-jogo-stop.firebasestorage.app",
            messagingSenderId: "958593186721",
            appId: "1:958593186721:web:29fd0897255ccb8e44a9e0",
            measurementId: "G-WGRJWRVBEN"
        };
        
        // O RESTANTE DO CÓDIGO (NÃO PRECISA MUDAR)
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const gameContainer = document.getElementById('game-container');

        const urlParams = new URLSearchParams(window.location.search);
        const roomId = urlParams.get('sala');

        if (!roomId) {
            gameContainer.innerHTML = '<h1>ERRO: Link inválido. Peça o link correto ao seu professor.</h1>';
        } else {
            const gameStateRef = database.ref('salas/' + roomId);

            gameStateRef.on('value', (snapshot) => {
                const state = snapshot.val();
                if (!state) {
                    gameContainer.innerHTML = `<h1>Aguardando o professor iniciar o jogo na sala "${roomId}"...</h1>`;
                    return;
                }
                renderGame(state);
                const overlay = document.querySelector('#status-overlay');
                const inputs = document.querySelectorAll('.game-input');
                if (state.status === 'JOGANDO') {
                    if (overlay) overlay.style.display = 'none';
                    inputs.forEach(input => input.disabled = false);
                } else {
                    if (overlay) overlay.style.display = 'flex';
                    inputs.forEach(input => input.disabled = true);
                }
            });
        }

        function renderGame(state) {
            if (document.getElementById('letter-display')) {
                document.getElementById('letter-display').textContent = state.letter;
                return;
            }
            gameContainer.innerHTML = `
                <h2>Sala: ${roomId}</h2>
                <div>Letra: <span id="letter-display" style="font-size: 5em; font-weight: bold; color: #007BFF;">${state.letter}</span></div>
                <hr>
                <div id="categories-container">
                    <label>Nome:</label><br><input type="text" class="game-input"><br>
                    <label>Animal:</label><br><input type="text" class="game-input"><br>
                    <label>Fruta:</label><br><input type="text" class="game-input"><br>
                    <label>Cor:</label><br><input type="text" class="game-input"><br>
                    <label>Objeto:</label><br><input type="text" class="game-input"><br>
                </div>
                <div id="status-overlay" style="display: none;">STOP!</div>
            `;
        }
    </script>
</body>
</html>
